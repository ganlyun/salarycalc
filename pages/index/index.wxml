<!--index.wxml-->
<view class="container">
  <view class="userinfo">
    <block wx:if="{{canIUseOpenData}}">
      <view class="userinfo-avatar" bindtap="bindViewTap">
        <open-data type="userAvatarUrl"></open-data>
      </view>
      <open-data type="userNickName"></open-data>
    </block>
    <block wx:elif="{{!hasUserInfo}}">
      <button wx:if="{{canIUseGetUserProfile}}" bindtap="getUserProfile"> 获取头像昵称 </button>
      <button wx:elif="{{canIUse}}" open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button>
      <view wx:else> 请使用1.4.4及以上版本基础库 </view>
    </block>
    <block wx:else>
      <image class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
      <text class="userinfo-nickname">{{userInfo.nickName}}</text>
    </block>
  </view>

  <view class="page-body">
    <view class="page-section">
      <!-- <view class="section__title">请选择假别</view> -->
      <picker bindchange="bindPickerChange" value="{{index}}" range="{{array}}" range-key="{{name}}">
        <view class="picker">
          选择假别 {{array[index]}}
        </view>
      </picker>
    </view>
    <view class="page-section">
      <view class="section__title">请假天数</view>
      <view class="weui-cells weui-cells_after-title">
        <view class="weui-cell weui-cell_input">
          <input class="weui-input" auto-focus placeholder="请输入请假天数" model:value="{{days}}"/>
        </view>
      </view>
    </view>
    <view class="page-section">
      <button type="primary" bindtap="bindCalcTap" disabled="{{btnDisable}}">开始计算</button>
    </view>
    <view class="page-section">
      <view>共计扣除 {{amount}} 元</view>
      <view wx:if="{{tip}}">{{tip}}</view>
    </view>
  </view>
</view>